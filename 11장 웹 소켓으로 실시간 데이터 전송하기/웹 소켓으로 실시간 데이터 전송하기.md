# 웹 소켓 이해하기

1. 웹 소켓  
   웹 소켓은 HTML5에서 새로 추가된 스펙으로 실시간 양방향 데이터 전송을 위한 기술 입니다.  
   HTTP와 다르게 WS라는 프로토콜을 사용합니다. 따라서 브라우저와 서버가 WS 프로토콜을 지원하면 사용할 수 있습니다.  
   최신 브라우저는 대부분 웹 소켓을 지원하고, 노드는 ws나 Socket, IO 같은 패키지를 통해 웹 소켓을 사용할 수 있습니다.  
   처음에 웹 소켓 연결이 이루어지고 나면 그 다음부터는 계속 연결된 상태로 있어 따로 업데이트가 있는지 요청을 보낼 필요가 없습니다.

2. 서버센트 이벤트 (Server Sent Events, 이하 SSE)  
   EventSource라는 객체를 사용하는 서버센트 이벤트는 처음에 한 번만 연결하면 서버가 클라이언트에 지속적으로 데이터를 보내줍니다.  
   웹 소켓과 다른 점은 클라이언트에서 서버로는 데이터를 보낼 수 없다는 점입니다.  
   즉, 서버에서 클라이언트로 데이터를 보내는 단방향 통신입니다. 주식 차트 업데이트나 SNS에서 새로운 게시물 가져오기 등 양방향 통신을 할 필요가 없는 경우에 사용합니다.

# Socket.IO 사용하기

ws 패키지는 간단하게 웹 소켓을 사용하고자 할 때 좋습니다. 하지만 구현하고자 하는 서비스가 조금 더 복잡해진다면  
Socket.IO를 사용하는 것이 편합니다.  
Socket.IO는 먼저 폴링 방식으로 서버와 연결합니다. 그렇기 때문에 코드에서 HTTP 프로토콜을 사용한 것입니다. 폴링 연결 후,  
웹 소켓을 사용할 수 있다면 웹 소켓으로 업그레이드 합니다.

1. main.pug를 보면 io.connect 메서드의 주소가 달라졌습다. 주소 뒤에 /room이 붙었습니다.
   - 이것을 네임스페이스라고 부릅니다.
   - 서버에서 /room 네임스페이스로 보낸 데이터만 받을 수 있습니다.
2. Socket.IO에는 네임스페이스보다 더 세부적인 개념으로 방(room)이라는 것이 있습니다.  
   같은 네임스페이스 안에서도 같은 방에 들어 있는 소켓끼리만 데이터를 주고받을 수 있습니다.
   - join 메서드와 leave 메서드는 방의 아이디를 인자로 받습니다.
