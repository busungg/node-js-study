# npm 알아보기
npm은 Node Package Manager의 약어로, 이름 그대로 노드 패키지 매니저입니다.  
npm에 업로드된 노드 모듈을 패키지라고 부릅니다. 모듈이 다른 모듈을 사용할 수 있는 것처럼, 패키지가 다른 패키지를 사용할 수도 있습니다. 이런 관계를 ***의존 관계*** 라고 부릅니다.   
- npm의 대체자로 yarn이 있습니다. yarn은 페이스북이 내놓은 패키지 매니저입니다.

# package.json으로 패키지 관리하기
서비스에 필요한 패키지를 하나씩 추가하다 보면 패키지 수가 많아집니다. 그리고 사용할 패키지는 저마다 고유한 버전이 닜으므로 어딘가에 기록해두어야 합니다. 같은 패키지라도 버전별로 기능이 다를 수 있으므로 동일한 버전을 설치하지 않으면 문제가 생깁니다. 이때 ***패키지의 버전을 관리하는 파일이 바로 package.json*** 입니다.   
따라서 프로젝트를 시작하기 전에 package.json부터 만들고 시작하는 것이 좋습니다. ***npm은 package.json을 만드는 명령어*** 를 제공합니다.
```
npm init
```

package.json 생성시 내용
1. package name
    - 패키지의 이름입니다. package.json의 name속성에 저장됩니다.
2. version
    - 패키지의 버전입니다. npm의 버전은 다소 엄격하게 관리됩니다.
3. entry point (package.json의 main)
    - 자바스크립트 실행 파일 진입점입니다. 보통 마지막으로 module.exports를 하는 파일을 지정합니다. package.json의 main 속성에 저장됩니다.
4. test command (package.json의 scripts속성 안의 test)
    - 코드를 테스트할 때 입력할 명령어를 의미합니다. package.json scripts속성 안의 test 속성에 저장됩니다.
5. git repository
    - 코드를 저장해둔 Git 저장소 주소를 의미합니다. 나중에 소스에 문제가 생겼을 때 사용자들이 이 저장소에 방문해 문제를 제기할 수도 있고, 코드 수정본을 올릴 수도 있습니다. package.json repositor속성에 저장됩니다.
6. keywords
    - 키워드는 npm 공식 홈페이지에서 패키지를 쉽게 찾을 수 있게 해줍니다. package.json의 keywords 속성에 저장됩니다.
7. license
    - 해당 패키지의 라이선스를 넣어주면 됩니다.

package.json의 scripts 부분은 npm 명령어를 저장해두는 부분입니다. ***콘솔에서 npm run [스크립트 명령어]*** 를 입력하면 해당 스크립트가 실행됩니다.  
test 스크립트 외에도 scripts 속성에 명령어 여러 개를 등록해두고 사용할 수 있습니다. 보통 start 명령어에 ***node [파일명]*** 을 저장해두고 npm start로 실행합니다. start나 test 같은 스크립트는 run을 붙이지 않아도 실행됩니다.

npm에서 패키지를 설치하는 명령어는
```
npm install [패키지 이름]

//여러개의 패키지를 설치할 시
npm install [패키지1] [패키지2] [...]

//개발용 패키지 설치
//실제 배포 시에는 사용되지 않고, 개발 중에만 사용되는 패키지들입니다.
npm install --save-dev [패키지] [...]

//전역 패키지 설치
//패키지를 현재 폴더의 node_modules에 설치하는 것이 아니라 npm이 설치되어 있는 폴더에 설치합니다.
//이 폴더의 경로는 보통 시스템 환경 변수에 등록되어 있으므로 전역 설치한 패키지는 콘솔의 커맨드로 사용할 수 있습니다.
npm install --global [패키지]
```
패키지 설치 시 설치된 패키지는 package.json에 기록됩니다.   
dependencies라는 속성이 생기고 패키지 이름과 설치된 버전이 저장됩니다.  
추가로 node_modules라는 폴더도 생성되는데 그 안에 설치한 패키지들이 들어 있으며 package-lock.json이라는 파일도 생성됩니다. 내용을 보면 직접 설치한 패키지외에도 node_modules에 들어 있는 패키지들의 정보가 담겨 있습니다.   
npm으로 패키지를 설치, 수정, 삭제할 때마다 내부 의존 관계를 이 파일에 저장합니다.

# 패키지 버전 이해하기
노드 패키지와 노드 버전은 항상 세 자리로 이루어져 있습니다. 버전이 세 자리인 이유는 SemVer 방식의 버전 넘버링을 따르기 때문입니다.  
SemVer는 Semantic Versioning(유익적 버전)의 약어입니다. 버전을 구성하는 세 자리가 모두 의미를 가지고 있다는 뜻입니다.   
버전의 첫 번째 자리는 major 버전입니다. 주 버전이 0이면 초기 개발 중이라는 뜻입니다. 1부터는 정식 버전이라는 뜻입니다. major 버전은 하위 호환이 안 될 정도로 패키지의 내용이 수정되었을 때 올립니다.    
두 번째 자리는 minor 버전입니다. minor 버전은 하위 호환이 되는 기능 업데이트 시에 올립니다. 
세 번째 자리는 patch 버전입니다. 새로운 기능이 추가되었다기보다는 기존 기능에 문제가 있어 수정한 것을 내놓았을 때 patch 버전을 올립니다.

package.json에는 버전 앞에 ^나 ~또는 >,< 같은 문자가 붙어 있습니다. 이 문자는 버전에는 포함되지 않지만 설치 또는 업데이트 시 어떤 버전을 설치해야 하는지 알려줍니다.
1. ^
    - minor 버전까지만 설치 또는 업데이트 합니다. npm install express@^1.1.1이라면 1.1.1 <= 버전 < 2.0.0 까지 설치 됩니다. 1.x.x와 같이 표현할 수도 있습니다.
2. ~
    - patch 버전까지만 설치 또는 업데이트합니다.
3. \>, <, >=, <=, =
    - 초과, 미만, 이상, 이하, 동일을 뜻합니다.
4. @latest
    - 항상 최신 버전의 패키지를 설치합니다. x로도 표현할 수 있습니다.

# 기타 npm 명령어
1. npm outdated
    - 업데이트할 수 있는 패키지가 있는지 확인할 수 있는 명령어입니다.
2. npm update [패키지명]
    - 해당 패키지를 업데이트할 수 있습니다. ***npm update를 하면 업데으트 가능한 모든 패키지가 Wanted에 적힌 버전으로 업데이트됩니다.***
3. npm uninstall [패키지명]
    - 해당 패키지를 제거하는 명령어 입니다. 패키지가 node_modules폴더와 package.json에서 사라집니다. npm rm [패키지명]으로 줄여쓸 수도 있습니다.
4. npm search [검색어]
    - npm의 패키지를 검색할 수 있습니다. 
5. npm info [패키지명]
    - 패키지의 세부 정보를 파악하고자 할 때 사용하는 명령어입니다. package.json의 내용과 의존 관계, 설치 가능한 버전 정보 등이 표시됩니다.
6. npm adduser
    - npm 로그인을 위한 명령어입니다. npm 공식 사이트에서 가입한 계정으로 로그인하면 됩니다. 나중에 패키지를 배포할 때 로그인이 필요합니다. 패키지를 배포하지 않을 것이라면 npm에 가입할 필요는 없습니다.
7. npm whoami
    - 로그인한 사용자가 누구인지 알려줍니다. 로그인된 상태가 아니라면 에러가 발생합니다.
8. npm logout
    - npm adduser로 로그인한 계정을 로그아웃할때 사용합니다.
9. npm version [버전]
    - package.json의 버전을 올려줍니다. 원하는 버전의 숫자를 넣으면 됩니다. 
10. npm deprecate [패키지명][버전] [메시지]
    - 해당 패키지를 설치할 때 경고 메시지를 띄우가 하는 명령어입니다. 자신의 패키지에만 이 명령어를 적용할 수 있습니다. deprecated 처리를 해두면 다른 사용자들이 버그가 있는 버전의 패키지를 설치할 때 경고 메시지가 출력됩니다.
11. npm publish
    - 자신이 만든 패키지를 배포할 때 사용합니다.
12. npm unpublish
    - 배포한 패키지를 제거할 때 사용합니다. 24시간 이내에 배포한 패키지만 제거할 수 있습니다. 이러한 제약이 있는 이유는 의존성 관계 때문입니다. 다른 사람이 사용하고 있는 패키지를 제거하는 경우를 막기 위해입니다.