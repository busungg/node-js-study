# 프로젝트 구조 갖추기

sequelize db:create 명령어로 데이터베이스를 생성합니다.  
사용자가 입찰을 여러 번 할 수 있으므로 사용자 모델과 경매 모델도 일대다 관계입니다.  
한 상품에 여러 명이 입찰하므로 상품 모델과 경매 모델도 일대다 관계입니다.  
사용자 모델과 상품 모델 간에는 일대다 관계가 두 번 적용됩니다. 사용자가 여러 상품을 등록할 수 있고,  
사용자가 여러 상품을 낙찰받을 수도 있기 때문입니다.  
두 관계를 구별하기 위해 as 속성에 owner, sold로 관계명을 적어주었습니다.  
각각 ownerId, soldId 컬럼으로 상품 모델에 추가됩니다.

router.use에서 res.locals.user = req.user;로 모든 pug 템플릿에 사용자 정보를 변수로 집어 넣었습니다.  
이렇게 하면 res.render 메서드에 user: req.user를 하지 않아도 되므로 중복을 제거할 수 있습니다.

# 서버센트 이벤트 사용하기

모든 사람이 같은 시간에 경매가 종료되어야 합니다. 따라서 모든 사람에게 같은 시간이 표시되어야 합니다.  
하지만 클라이언트의 시간은 믿을 수 없습니다. 너무나도 손쉽게 시간을 변경할 수 있기 때문입니다.  
따라서 서버 시간을 받아오는 것이 좋습니다. 폴링이나 웹 소켓을 통해서 서버 시간을 받아올 수도 있지만, 이번 예제에서는  
**_서버센트 이벤트를 사용_** 해서 서버의 시간을 받아올 것입니다. 주기적으로 서버 시간을 조회하는 데는 양뱡향 통신이 필요하지 않기 때문입니다.

웹 소켓도 사용합니다. 웹 소켓은 경매 진행 중 다란 사람이 참여하거나 입찰했을 때 모두에게 금액을 알리는 역할을 할 것입니다.  
서버센트 이벤트와 웹 소켓은 같이 사용할 수 있습니다.

SSE 패키지와 Socket.IO 패키지를 동시에 설치합니다.
